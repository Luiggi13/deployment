name: Main file
on:
  pull_request:
    branches:
      - 'main'
  push:
    branches:
      - 'main'

jobs:
  unit:
    uses: Luiggi13/deployment/.github/workflows/unit.yaml@main
    with:
      environment: ${GITHUB_REF#refs/heads/}
  e2e:
    uses: Luiggi13/deployment/.github/workflows/e2e.yaml@main
    with:
      environment: ${GITHUB_REF#refs/heads/}
  deploy:
      runs-on: ubuntu-latest
      needs: [unit,e2e]
      steps:
        - name: Obtener informaci√≥n de la rama
          run: |
            case "${GITHUB_REF#refs/heads/}" in
              "main")
                echo "production"
                ;;
              "qa")
                echo "qa"
                ;;
              "development")
                echo "development"
                ;;
              *)
                echo "Otro entorno"
                ;;
            esac